<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1440">
    <title>Triple On Design (TOD) | 3D interactive graphic design studio</title>
    <meta name="description" content="TOD의 presentation design, interactive web design, marketing collateral projects를 소개하는 포트폴리오 사이트입니다.">
    <meta name="keywords" content="PPT design, 웹 디자인, 인터랙티브 웹, 3D graphic, Triple On Design, TOD">
    <meta name="author" content="Triple On Design">

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Triple On Design">
    <meta property="og:title" content="Triple On Design - 3D interactive design studio">
     <meta property="og:url" content="https://www.tripleondesign.com">
    <meta property="og:image" content="https://tripleondesign.com/images/og-image.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:wght@100;200;300;400;500;600;700;800;900;1000&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Audio Control: intercept Web Audio API before Spline loads -->
    <script>
        window._audioContexts = [];
        window._soundOn = false;
        const _OrigAudioCtx = window.AudioContext || window.webkitAudioContext;
        const _PatchedAudioCtx = function(...args) {
            const ctx = new _OrigAudioCtx(...args);
            window._audioContexts.push(ctx);
            if (!window._soundOn) ctx.suspend();
            return ctx;
        };
        _PatchedAudioCtx.prototype = _OrigAudioCtx.prototype;
        window.AudioContext = _PatchedAudioCtx;
        if (window.webkitAudioContext) window.webkitAudioContext = _PatchedAudioCtx;
    </script>
    
    <!-- Spline Viewer -->
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.51/build/spline-viewer.js"></script>
    
    <style>
        /* ============================================
           Base: 1920px → vw conversion
           Formula: vw = (px / 1920) * 100
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Google Sans Flex', 'Lexend', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #FFFFFF !important;
            color: #0A0A0A;
            overflow-x: hidden;
        }

        html {
            background: #FFFFFF !important;
            scroll-behavior: smooth;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 0.42vw; /* 8px */
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #0A0A0A;
            border-radius: 0.21vw; /* 4px */
        }
        
        /* Massive typography */
        .massive-text {
            font-size: 13.54vw; /* 260px */
            font-weight: 900;
            letter-spacing: -0.06em;
            line-height: 0.9;
        }
        
        /* Hero title */
        .hero-title {
            font-family: 'Google Sans Flex', 'Lexend', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 7.5vw; /* 144px */
            font-weight: 900;
            letter-spacing: -0.09em;
            line-height: 1;
        }
        
        .section-title {
            font-size: 6.25vw; /* 120px */
            font-weight: 900;
            letter-spacing: -0.04em;
            line-height: 1;
        }
        
        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .glass-hover {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-hover:hover {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            transform: translateY(-0.42vw);
        }
        
        /* Spline viewer styling */
        spline-viewer {
            width: 100%;
            height: 100%;
            border: none;
            min-height: 1px;
        }
        
        /* Navigation link animation */
        .nav-link {
            display: inline-block;
            padding: 0.42vw 1.04vw; /* 8px 20px */
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .nav-link:hover {
            transform: scale(1.2);
        }
        
        /* Logo container positioning */
        .logo-container {
            margin-left: -1.46vw; /* -28px */
        }
        
        /* Top button */
        .top-btn {
            margin-top: auto;
            padding-top: 2.08vw; /* 40px */
            display: flex;
            align-items: center;
            gap: 0;
            padding: 0.63vw 0.94vw; /* 12px 18px */
            border-radius: 2.6vw; /* 50px */
            border: 1px solid rgba(10,10,10,0.1);
            background: rgba(255,255,255,0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 0.21vw 1.04vw rgba(0,0,0,0.08);
            cursor: pointer;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            color: #0A0A0A;
        }
        .top-btn:hover {
            background: rgba(255,255,255,0.8);
            box-shadow: 0 0.31vw 1.56vw rgba(0,0,0,0.12);
            gap: 0.42vw;
            padding: 0.63vw 1.25vw;
        }
        .top-btn .arrow-icon {
            width: 0.94vw; /* 18px */
            height: 0.94vw;
            flex-shrink: 0;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .top-btn:hover .arrow-icon {
            transform: translateY(-0.16vw);
        }
        .top-btn .btn-text {
            max-width: 0;
            opacity: 0;
            white-space: nowrap;
            font-size: 0.63vw; /* 12px */
            font-weight: 800;
            letter-spacing: 0.05em;
            overflow: hidden;
            transition: max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        opacity 0.3s ease 0.1s;
        }
        .top-btn:hover .btn-text {
            max-width: 3.13vw; /* 60px */
            opacity: 1;
        }

        /* Hide mobile top button on desktop */
        .mobile-top-btn {
            display: none;
        }
        
        /* Triangle formation for 3D elements */
        .interact01 {
            position: absolute;
            top: calc(50% - 2.6vw);
            left: calc(50% + 5.21vw);
            transform: translate(-50%, -50%);
            width: 62.5vw; /* 1200px */
            height: 62.5vw;
            z-index: 25;
            opacity: 0.75;
            overflow: visible;
            pointer-events: none;
        }
        .interact01 spline-viewer {
            width: 41.67vw; /* 800px */
            height: 41.67vw;
            margin: auto;
            pointer-events: all;
        }
        
        .interact02 {
            position: absolute;
            top: 90%;
            left: calc(30% - 5.21vw);
            transform: translate(-50%, -50%);
            width: 208.33vw; /* 4000px */
            height: 208.33vw;
            z-index: 5;
            opacity: 1;
            overflow: visible;
            pointer-events: none;
        }
        .interact02 spline-viewer {
            width: 156.25vw; /* 3000px */
            height: 156.25vw;
            margin: auto;
            pointer-events: all;
        }
        
        .interact03 {
            position: absolute;
            top: 62%;
            left: 72%;
            transform: translate(-50%, -50%);
            width: 23.44vw; /* 450px */
            height: 23.44vw;
            z-index: 27;
            opacity: 1;
            overflow: visible;
            pointer-events: none;
        }
        .interact03 spline-viewer {
            pointer-events: all;
        }
        
        /* Show More button */
        .show-more-btn {
            position: absolute;
            bottom: 2.08vw; /* 40px */
            left: 50%;
            transform: translateX(-50%);
            z-index: 40;
            pointer-events: all;
            display: flex;
            align-items: center;
            gap: 0;
            padding: 0.73vw 1.04vw; /* 14px 20px */
            border-radius: 2.6vw;
            border: 1px solid rgba(255,255,255,0.5);
            background: rgba(255,255,255,0.3);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 0.21vw 1.04vw rgba(0,0,0,0.08);
            cursor: pointer;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            color: #0A0A0A;
        }
        .show-more-btn:hover {
            background: rgba(255,255,255,0.55);
            box-shadow: 0 0.31vw 1.56vw rgba(0,0,0,0.12);
            gap: 0.52vw;
            padding: 0.73vw 1.46vw;
        }
        .show-more-btn .arrow-icon {
            width: 1.04vw; /* 20px */
            height: 1.04vw;
            flex-shrink: 0;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .show-more-btn:hover .arrow-icon {
            transform: translateY(0.16vw);
        }
        .show-more-btn .btn-text {
            max-width: 0;
            opacity: 0;
            white-space: nowrap;
            font-size: 0.68vw; /* 13px */
            font-weight: 800;
            letter-spacing: 0.05em;
            overflow: hidden;
            transition: max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        opacity 0.3s ease 0.1s;
        }
        .show-more-btn:hover .btn-text {
            max-width: 6.25vw; /* 120px */
            opacity: 1;
        }

        /* About section unified text */
        .about-line {
            font-size: 7.29vw; /* 140px */
            font-weight: 900;
            letter-spacing: -0.04em;
            line-height: 1.12;
            margin: 0;
            color: #0A0A0A;
            display: flex;
            align-items: center;
        }
        .about-line:first-child {
            letter-spacing: -0.09em;
        }
        .about-line.clickable {
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .about-line.clickable:hover {
            transform: translateX(0.83vw);
        }
        /* Inline spline replacing "O" */
        .inline-spline {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 0.73em;
            height: 0.73em;
            margin: 0 -0.02em;
            margin-bottom: 0.03em;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
        }
        .inline-spline spline-viewer {
            width: 280%;
            height: 280%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: all;
        }
        .spline-01 {
            width: 0.9em;
            height: 0.9em;
            margin-left: 0.21vw;
        }
        .spline-01 spline-viewer {
            width: 300%;
            height: 300%;
        }
        .spline-02 spline-viewer {
            width: 400%;
            height: 400%;
        }
        .spline-03 spline-viewer {
            width: 450%;
            height: 450%;
            top: calc(45% + 2.08vw);
            left: 45%;
            transform: translate(-50%, -50%);
        }

        /* Works section styling */
        #works {
            position: relative;
        }
        .works-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.08vw; /* 40px */
        }
        .works-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.25vw; /* 24px */
            max-width: 100%;
            margin: 0 auto;
        }
        .work-item {
            aspect-ratio: 16 / 9;
            border-radius: 0;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .work-item:hover {
            transform: translateY(-0.42vw);
        }
        .work-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: grayscale(100%);
            transition: filter 0.6s ease;
        }
        .work-item:hover img {
            filter: grayscale(0%);
        }

        /* Modal overlay and popup */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: transparent;
            z-index: 100;
            display: none;
            pointer-events: none;
        }
        .modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border-radius: 2.08vw; /* 40px */
            padding: 2.92vw 4.17vw; /* 56px 80px */
            max-width: 46.88vw; /* 900px */
            width: 90%;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 2.08vw 5.21vw rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.5);
            position: relative;
            transform: scaleX(0) scaleY(0.8);
            opacity: 0;
            pointer-events: all;
            transition: transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1),
                        opacity 0.5s ease;
        }
        .modal-content.pop {
            transform: scaleX(1) scaleY(1);
            opacity: 1;
        }
        .modal-close {
            position: absolute;
            top: 1.04vw; /* 20px */
            right: 1.04vw;
            width: 2.08vw; /* 40px */
            height: 2.08vw;
            border-radius: 50%;
            background: rgba(10,10,10,0.1);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25vw; /* 24px */
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .modal-close:hover {
            background: rgba(10,10,10,0.9);
            color: white;
            transform: rotate(90deg);
        }
        .modal-title {
            font-size: 3.75vw; /* 72px */
            font-weight: 900;
            letter-spacing: -0.04em;
            margin-bottom: 1.25vw;
            color: #0A0A0A;
        }
        .modal-body {
            font-size: 0.94vw; /* 18px */
            line-height: 1.7;
            color: #0A0A0A;
            white-space: pre-line;
        }

        .chat-message {
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(0.52vw);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Chat window styling */
        .chat-window {
            max-height: 26.04vw; /* 500px */
            overflow-y: auto;
        }

        /* Email link hover effect */
        .email-link {
            display: inline-block;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .email-link:hover {
            transform: scale(1.15);
        }

        /* Email modal specific styles */
        .email-modal-content {
            max-width: 31.25vw; /* 600px */
        }
        .email-form-input {
            width: 100%;
            padding: 0.73vw 1.04vw; /* 14px 20px */
            border-radius: 0.83vw; /* 16px */
            border: 1px solid rgba(10,10,10,0.2);
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            font-size: 0.83vw; /* 16px */
            transition: all 0.3s ease;
        }
        .email-form-input:focus {
            outline: none;
            border-color: #0A0A0A;
            background: rgba(255,255,255,0.95);
        }
        .email-form-textarea {
            min-height: 10.42vw; /* 200px */
            resize: vertical;
            font-family: inherit;
        }
        .email-form-button {
            width: 100%;
            padding: 0.83vw 1.67vw; /* 16px 32px */
            border-radius: 0.83vw;
            border: 1px solid #0A0A0A;
            background: #0A0A0A;
            color: white;
            font-size: 0.83vw;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .email-form-button:hover {
            background: #2A2A2A;
            transform: translateY(-0.1vw);
            box-shadow: 0 0.42vw 1.25vw rgba(0,0,0,0.2);
        }
        .email-form-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Chat option buttons */
        .chat-option-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.63vw 0.83vw; /* 12px 16px */
            margin-bottom: 0.42vw;
            border-radius: 0.63vw; /* 12px */
            border: 1px solid rgba(10,10,10,0.2);
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            font-size: 0.68vw; /* 13px */
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .chat-option-btn:hover {
            background: rgba(10,10,10,0.95);
            color: white;
            transform: translateX(0.21vw);
            border-color: #0A0A0A;
        }
        .chat-option-title {
            font-weight: 800;
            margin-bottom: 2px;
        }
        .chat-option-desc {
            font-size: 0.57vw; /* 11px */
            opacity: 0.7;
        }

        /* Chat avatar with TOD text */
        .chat-avatar-tod {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.52vw; /* 10px */
            font-weight: 900;
            color: white;
            letter-spacing: -0.02em;
        }

        /* Chat avatar for client */
        .chat-avatar-client {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.47vw; /* 9px */
            font-weight: 900;
            color: white;
            letter-spacing: -0.02em;
            background: #3B82F6 !important;
        }

        /* Project inquiry form in chat */
        .project-form-container {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 0.83vw;
            padding: 1.04vw; /* 20px */
            border: 1px solid rgba(10,10,10,0.1);
        }
        .project-form-input {
            width: 100%;
            padding: 0.52vw 0.73vw; /* 10px 14px */
            border-radius: 0.52vw; /* 10px */
            border: 1px solid rgba(10,10,10,0.2);
            background: rgba(255,255,255,0.9);
            font-size: 0.68vw; /* 13px */
            transition: all 0.3s ease;
            font-family: inherit;
        }
        .project-form-input:focus {
            outline: none;
            border-color: #0A0A0A;
            background: white;
        }
        .project-form-label {
            display: block;
            font-size: 0.63vw; /* 12px */
            font-weight: 700;
            margin-bottom: 0.31vw;
            color: #0A0A0A;
        }
        .project-form-group {
            margin-bottom: 0.73vw; /* 14px */
        }
        .project-form-textarea {
            min-height: 4.17vw; /* 80px */
            resize: vertical;
        }
        .project-submit-btn {
            width: 100%;
            padding: 0.73vw; /* 14px */
            border-radius: 0.63vw;
            border: 1px solid #0A0A0A;
            background: #0A0A0A;
            color: white;
            font-size: 0.73vw; /* 14px */
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 0.42vw;
        }
        .project-submit-btn:hover {
            background: #2A2A2A;
            transform: translateY(-0.1vw);
            box-shadow: 0 0.31vw 1.04vw rgba(0,0,0,0.3);
        }
        .project-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <!-- Left Sidebar Navigation (desktop) / Top Header (mobile) -->
    <nav class="sidebar fixed top-0 h-screen bg-white z-50 flex flex-col" style="left:-0.52vw; padding:3.13vw 2.08vw; width:13.33vw;">
        <!-- Logo (static image; no finger animation) -->
        <a href="#hero" class="logo-container w-full block" style="height:6.67vw; margin-bottom:0.78vw; cursor:default; display:flex; align-items:center;">
            <img src="images/logo.png" alt="Triple On Design" style="width:100%; height:100%; object-fit:contain; display:block;">
        </a>
        
        <!-- Menu Links -->
        <ul class="flex flex-col gap-0 text-lg font-bold max-md:text-sm">
            <li><a href="#about" class="nav-link">ABOUT</a></li>
            <li><a href="#works" class="nav-link">WORKS</a></li>
            <li><a href="#contact" class="nav-link">CONTACT</a></li>
        </ul>

        <!-- Top Button (desktop: bottom of sidebar, mobile: header right) -->
        <a href="#hero" class="top-btn">
            <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 15l-6-6-6 6"/>
            </svg>
            <span class="btn-text">TOP</span>
        </a>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content" style="margin-left:13.33vw;">
        <!-- Hero Section -->
        <section id="hero" class="relative min-h-screen flex items-center justify-center overflow-visible">
            <!-- Center Title -->
            <h1 class="hero-title text-center z-20 relative px-8">
                TRIPLE ON DESIGN
            </h1>
            
            <!-- Interactive 3D Elements in Triangle Formation -->
            <div class="interact01">
                <spline-viewer loading="eager" hint="false" url="https://prod.spline.design/EYt-16NgpjRM33MQ/scene.splinecode"></spline-viewer>
            </div>
            
            <div class="interact02">
                <spline-viewer loading="eager" hint="false" url="https://prod.spline.design/vmI8J6V6ba5xZF5s/scene.splinecode"></spline-viewer>
            </div>
            
            <div class="interact03">
                <spline-viewer loading="eager" hint="false" url="https://prod.spline.design/9-fO7pFKWovzArzU/scene.splinecode"></spline-viewer>
            </div>

            <!-- Show More Button -->
            <a href="#about" class="show-more-btn">
                <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
                <span class="btn-text">SHOW MORE</span>
            </a>
        </section>

        <!-- ABOUT Section -->
        <section id="about" class="min-h-screen flex items-center justify-center" style="padding:6.25vw 4.17vw;">
            <div class="about-text text-left">
                <h2 class="about-line">TRIPLE ON DESIGN :</h2>
                <h3 class="about-line clickable" data-modal="graphic">GRAPHIC&nbsp;<span class="inline-spline spline-01"><spline-viewer loading="eager" hint="false" url="https://prod.spline.design/EYt-16NgpjRM33MQ/scene.splinecode"></spline-viewer></span><span style="margin-left:-0.42vw">N.</span></h3>
                <h3 class="about-line clickable" data-modal="switch">SWITCH&nbsp;<span class="inline-spline spline-02"><spline-viewer loading="eager" hint="false" url="https://prod.spline.design/vmI8J6V6ba5xZF5s/scene.splinecode"></spline-viewer></span>N.</h3>
                <h3 class="about-line clickable" data-modal="world">WORLD&nbsp;<span class="inline-spline spline-03"><spline-viewer loading="eager" hint="false" url="https://prod.spline.design/9-fO7pFKWovzArzU/scene.splinecode"></spline-viewer></span>N.</h3>
            </div>
        </section>

        <!-- WORKS Section -->
        <section id="works" class="min-h-screen" style="padding:6.25vw 4.17vw;">
            <div class="works-header">
                <h2 class="text-5xl font-black tracking-tight">WORKS</h2>
            </div>
            
            <!-- 2x2 Grid -->
            <div class="works-grid">
                <!-- Project 1 -->
                <div class="work-item">
                    <img src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=1200&h=675&fit=crop" alt="Modern Architecture Design">
                </div>
                
                <!-- Project 2 -->
                <div class="work-item">
                    <img src="https://images.unsplash.com/photo-1634942537034-2531766767d1?w=1200&h=675&fit=crop" alt="3D Abstract Art">
                </div>
                
                <!-- Project 3 -->
                <div class="work-item">
                    <img src="https://images.unsplash.com/photo-1557672172-298e090bd0f1?w=1200&h=675&fit=crop" alt="Brand Identity">
                </div>
                
                <!-- Project 4 -->
                <div class="work-item">
                    <img src="https://images.unsplash.com/photo-1551650975-87deedd944c3?w=1200&h=675&fit=crop" alt="Interactive Experience">
                </div>
            </div>
            
            <!-- Show More Button below grid -->
            <div class="flex justify-center mt-12">
                <a href="#contact" class="show-more-btn" style="position:relative;bottom:auto;left:auto;transform:none;">
                    <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                    <span class="btn-text">SHOW MORE</span>
                </a>
            </div>
        </section>

        <!-- CONTACT Section with Gemini Chatbot -->
        <section id="contact" class="min-h-screen" style="padding:6.25vw 4.17vw;">
            <div class="grid grid-cols-2 mx-auto" style="gap:4.17vw; max-width:66.67vw;">
                <!-- Left: 3D Interactive -->
                <div class="flex flex-col items-center justify-start" style="margin-top:2.08vw;">
                    <!-- Title above 3D object -->
                    <h2 class="text-5xl font-black mb-2 tracking-tight">PROJECTS WITH TOD</h2>
                    
                    <!-- Contact Info -->
                    <div class="mb-4 text-center">
                        <p class="text-gray-600 text-sm mb-3">Talk to our AI agent to define your scope, or email us directly.</p>
                        <a href="#" onclick="openEmailModal(event)" class="email-link text-lg font-black hover:text-gray-600 transition-colors">info@tripleon.design</a>
                    </div>
                    
                    <div style="width:33.33vw; height:33.33vw;">
                        <spline-viewer loading="eager" hint="false" url="https://prod.spline.design/EYt-16NgpjRM33MQ/scene.splinecode"></spline-viewer>
                    </div>
                </div>
                
                <!-- Right: Chat Window -->
                <div class="glass rounded-3xl border border-gray-200 shadow-2xl overflow-hidden" style="margin-top:2.08vw;">
                    <!-- Black header -->
                    <div class="bg-black px-8 py-6">
                        <h3 class="text-xl font-black tracking-tight text-white">TOD A.I. TERMINAL</h3>
                    </div>
                    
                    <!-- Chat content -->
                    <div class="p-8">
                        <!-- Chat Messages -->
                        <div class="chat-window space-y-4 mb-6">
                            <div class="chat-message flex gap-3">
                                <div class="w-8 h-8 bg-black rounded-xl flex-shrink-0 chat-avatar-tod">TOD</div>
                                <div class="glass rounded-2xl p-4 max-w-md">
                                    <p class="text-sm">Hello! TOD Intelligence online. How can TOD elevate your brand or research today?</p>
                                </div>
                            </div>
                            
                            <!-- Option buttons -->
                            <div class="chat-message flex gap-3">
                                <div class="w-8 h-8 flex-shrink-0"></div>
                                <div class="max-w-md w-full">
                                    <button class="chat-option-btn" onclick="selectOption('Visual Science', 'Graphical Abstracts, Figures, Research Schematics, Journal Cover Art, etc.')">
                                        <div class="chat-option-title">Visual Science</div>
                                        <div class="chat-option-desc">Graphical Abstracts, Figures, Research Schematics, Journal Cover Art, etc.</div>
                                    </button>
                                    <button class="chat-option-btn" onclick="selectOption('Presentation Design', 'Presentation Slides, Conference Posters, Investor Pitch Decks, etc.')">
                                        <div class="chat-option-title">Presentation Design</div>
                                        <div class="chat-option-desc">Presentation Slides, Conference Posters, Investor Pitch Decks, etc.</div>
                                    </button>
                                    <button class="chat-option-btn" onclick="selectOption('Web & Interactive', 'Corporate Websites, Responsive Microsites, Virtual Showrooms, Interactive Landing Pages, etc.')">
                                        <div class="chat-option-title">Web & Interactive</div>
                                        <div class="chat-option-desc">Corporate Websites, Responsive Microsites, Virtual Showrooms, Interactive Landing Pages, etc.</div>
                                    </button>
                                    <button class="chat-option-btn" onclick="selectOption('Brand & Marketing Collateral', 'Corporate Brochures, Product Catalogs, Leaflets, Annual Reports')">
                                        <div class="chat-option-title">Brand & Marketing Collateral</div>
                                        <div class="chat-option-desc">Corporate Brochures, Product Catalogs, Leaflets, Annual Reports</div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Input Area -->
                        <div class="flex gap-3">
                            <input 
                                type="text" 
                                placeholder="Type your message..." 
                                class="flex-1 glass rounded-2xl px-6 py-4 border border-gray-300 focus:outline-none focus:border-black transition-colors"
                                id="chatInput"
                            >
                            <button 
                                class="glass rounded-2xl px-8 py-4 font-black border border-gray-300 hover:bg-black hover:text-white transition-all"
                                onclick="sendMessage()"
                            >
                                SEND
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Top Button -->
            <div class="max-md:block hidden">
                <a href="#hero" class="top-btn mobile-top-btn">
                    <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 15l-6-6-6 6"/>
                    </svg>
                    <span class="btn-text">TOP</span>
                </a>
            </div>
        </section>

        <!-- Modal -->
        <div class="modal-overlay" id="modal">
            <div class="modal-content" id="modalContent">
                <button class="modal-close" onclick="closeModal()">×</button>
                <h3 class="modal-title" id="modalTitle"></h3>
                <div class="modal-body" id="modalBody"></div>
            </div>
        </div>

        <!-- Email Modal -->
        <div class="modal-overlay" id="emailModal">
            <div class="modal-content email-modal-content" id="emailModalContent">
                <button class="modal-close" onclick="closeEmailModal()">×</button>
                <h3 class="modal-title">Send us a message</h3>
                <div class="modal-body">
                    <form id="emailForm" onsubmit="sendEmail(event)" class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold mb-2">Your Name</label>
                            <input type="text" name="name" class="email-form-input" placeholder="John Doe" required>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-2">Your Email</label>
                            <input type="email" name="email" class="email-form-input" placeholder="your@email.com" required>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-2">Subject</label>
                            <input type="text" name="subject" class="email-form-input" placeholder="Project inquiry" required>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-2">Message</label>
                            <textarea name="message" class="email-form-input email-form-textarea" placeholder="Tell us about your project..." required></textarea>
                        </div>
                        <button type="submit" class="email-form-button" id="emailSubmitBtn">
                            SEND MESSAGE
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer style="padding:3.13vw 4.17vw;">
            <div class="flex justify-between items-center max-md:flex-col max-md:gap-6">
                <div>
                    <p class="font-bold text-sm">© 2026 TRIPLE ON DESIGN</p>
                    <a href="mailto:info@tripleon.design" class="text-sm text-gray-600 hover:text-black transition-colors mt-2 block">info@tripleon.design</a>
                    <p class="text-xs text-gray-400 mt-1">B102, 96 Gajeongbuk-ro, Yuseong-gu, Daejeon 34111, South Korea</p>
                </div>
                
                <!-- Social Icons -->
                <div class="flex gap-6">
                    <a href="#" class="w-12 h-12 rounded-2xl border-2 border-black flex items-center justify-center font-black hover:bg-black hover:text-white transition-all">
                        X
                    </a>
                    <a href="#" class="w-12 h-12 rounded-2xl border-2 border-black flex items-center justify-center font-black hover:bg-black hover:text-white transition-all">
                        IN
                    </a>
                    <a href="#" class="w-12 h-12 rounded-2xl border-2 border-black flex items-center justify-center font-black hover:bg-black hover:text-white transition-all">
                        IG
                    </a>
                </div>
            </div>
        </footer>
    </main>

    <!-- Mobile Spline URL Switcher -->
    <script>
        (function() {
            // ============================================================
            // Mobile detection & Spline URL branching
            // ============================================================
            // Map: desktop URL → mobile-optimized URL
            // 모바일용 경량 .splinecode 파일이 준비되면 아래 mobileUrl을 교체하세요.
            const splineUrlMap = [
                {
                    desktopUrl: 'https://prod.spline.design/18IsstohV93Bg7eo/scene.splinecode',
                    mobileUrl:  'https://prod.spline.design/18IsstohV93Bg7eo/scene.splinecode' // ← 모바일용 URL로 교체
                },
                {
                    desktopUrl: 'https://prod.spline.design/EYt-16NgpjRM33MQ/scene.splinecode',
                    mobileUrl:  'https://prod.spline.design/EYt-16NgpjRM33MQ/scene.splinecode' // ← 모바일용 URL로 교체
                },
                {
                    desktopUrl: 'https://prod.spline.design/vmI8J6V6ba5xZF5s/scene.splinecode',
                    mobileUrl:  'https://prod.spline.design/vmI8J6V6ba5xZF5s/scene.splinecode' // ← 모바일용 URL로 교체
                },
                {
                    desktopUrl: 'https://prod.spline.design/9-fO7pFKWovzArzU/scene.splinecode',
                    mobileUrl:  'https://prod.spline.design/9-fO7pFKWovzArzU/scene.splinecode' // ← 모바일용 URL로 교체
                }
            ];

            const isMobileDevice = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
                                || (window.innerWidth <= 768);

            if (isMobileDevice) {
                // DOM 준비 후 모든 spline-viewer의 URL을 모바일용으로 교체
                function swapSplineUrls() {
                    const viewers = document.querySelectorAll('spline-viewer');
                    viewers.forEach(viewer => {
                        const currentUrl = viewer.getAttribute('url');
                        const match = splineUrlMap.find(m => m.desktopUrl === currentUrl);
                        if (match && match.mobileUrl !== match.desktopUrl) {
                            viewer.setAttribute('url', match.mobileUrl);
                        }
                    });
                }

                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', swapSplineUrls);
                } else {
                    swapSplineUrls();
                }
            }
        })();
    </script>

    <!-- JavaScript for Chat Functionality -->
    <script>
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            const chatWindow = document.querySelector('.chat-window');
            
            // User message
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message flex gap-3 justify-end';
            userMessage.innerHTML = `
                <div class="glass rounded-2xl p-4 max-w-md bg-black text-white">
                    <p class="text-sm">${message}</p>
                </div>
                <div class="w-8 h-8 rounded-xl flex-shrink-0 chat-avatar-client">client</div>
            `;
            chatWindow.appendChild(userMessage);
            
            // Clear input
            input.value = '';
            
            // Simulate AI response after delay
            setTimeout(() => {
                const aiMessage = document.createElement('div');
                aiMessage.className = 'chat-message flex gap-3';
                aiMessage.innerHTML = `
                    <div class="w-8 h-8 bg-black rounded-xl flex-shrink-0 chat-avatar-tod">TOD</div>
                    <div class="glass rounded-2xl p-4 max-w-md">
                        <p class="text-sm">Thank you for your message! Our team will review your inquiry and get back to you shortly with tailored solutions for your project.</p>
                    </div>
                `;
                chatWindow.appendChild(aiMessage);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }, 1000);
            
            // Scroll to bottom
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        // Allow Enter key to send message
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Handle option selection
        function selectOption(title, description) {
            const chatWindow = document.querySelector('.chat-window');
            
            // Store selected category for later use
            window.selectedCategory = title;
            
            // Remove option buttons
            const optionButtons = chatWindow.querySelector('.chat-message:last-child');
            if (optionButtons) {
                optionButtons.remove();
            }
            
            // Add user's selection as a message
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message flex gap-3 justify-end';
            userMessage.innerHTML = `
                <div class="glass rounded-2xl p-4 max-w-md bg-black text-white">
                    <p class="text-sm font-bold">${title}</p>
                    <p class="text-xs opacity-70 mt-1">${description}</p>
                </div>
                <div class="w-8 h-8 rounded-xl flex-shrink-0 chat-avatar-client">client</div>
            `;
            chatWindow.appendChild(userMessage);
            
            // Scroll to bottom
            chatWindow.scrollTop = chatWindow.scrollHeight;
            
            // Simulate AI response and show form
            setTimeout(() => {
                const aiMessage = document.createElement('div');
                aiMessage.className = 'chat-message flex gap-3';
                aiMessage.innerHTML = `
                    <div class="w-8 h-8 bg-black rounded-xl flex-shrink-0 chat-avatar-tod">TOD</div>
                    <div class="glass rounded-2xl p-4 max-w-md">
                        <p class="text-sm">Great! Please fill out the form below so we can better understand your project needs.</p>
                    </div>
                `;
                chatWindow.appendChild(aiMessage);
                chatWindow.scrollTop = chatWindow.scrollHeight;
                
                // Show project form after a short delay
                setTimeout(() => {
                    showProjectForm();
                }, 500);
            }, 1000);
        }

        // Show project inquiry form
        function showProjectForm() {
            const chatWindow = document.querySelector('.chat-window');
            
            const formMessage = document.createElement('div');
            formMessage.className = 'chat-message flex gap-3';
            formMessage.innerHTML = `
                <div class="w-8 h-8 flex-shrink-0"></div>
                <div class="project-form-container" style="max-width: 100%;">
                    <form id="projectForm" onsubmit="submitProjectForm(event)">
                        <div class="project-form-group">
                            <label class="project-form-label">의뢰자 이름 *</label>
                            <input type="text" name="clientName" class="project-form-input" placeholder="홍길동" required>
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">소속 (연구원, 대학, 학회 등) *</label>
                            <input type="text" name="organization" class="project-form-input" placeholder="예: 서울대학교 연구실" required>
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">전화번호 *</label>
                            <input type="tel" name="phone" class="project-form-input" placeholder="010-1234-5678" required>
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">이메일 주소 *</label>
                            <input type="email" name="email" class="project-form-input" placeholder="your@email.com" required>
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">디자인 목적 *</label>
                            <input type="text" name="purpose" class="project-form-input" placeholder="예: 논문 투고용 그래픽 제작" required>
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">디자인 범위 *</label>
                            <input type="text" name="scope" class="project-form-input" placeholder="예: 그래픽화만, 기획부터 전체" required>
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">마감 일정 *</label>
                            <input type="text" name="deadline" class="project-form-input" placeholder="예: 2026년 3월 15일" required>
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">예산</label>
                            <input type="text" name="budget" class="project-form-input" placeholder="예: 100만원 ~ 200만원">
                        </div>
                        <div class="project-form-group">
                            <label class="project-form-label">기타 남기고 싶은 메모</label>
                            <textarea name="memo" class="project-form-input project-form-textarea" placeholder="추가로 전달하고 싶은 내용을 자유롭게 작성해주세요."></textarea>
                        </div>
                        <button type="submit" class="project-submit-btn" id="projectSubmitBtn">
                            TOD에게 전송하기
                        </button>
                    </form>
                </div>
            `;
            chatWindow.appendChild(formMessage);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Submit project form
        function submitProjectForm(e) {
            e.preventDefault();
            
            const form = e.target;
            const submitBtn = document.getElementById('projectSubmitBtn');
            
            // Collect form data
            const formData = {
                category: window.selectedCategory || 'Not specified',
                clientName: form.clientName.value,
                organization: form.organization.value,
                phone: form.phone.value,
                email: form.email.value,
                purpose: form.purpose.value,
                scope: form.scope.value,
                deadline: form.deadline.value,
                budget: form.budget.value || 'Not specified',
                memo: form.memo.value || 'None'
            };
            
            // Disable button
            submitBtn.disabled = true;
            submitBtn.textContent = '전송 중...';
            
            // Show success message
            setTimeout(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = 'TOD에게 전송하기';
                
                const chatWindow = document.querySelector('.chat-window');
                const successMessage = document.createElement('div');
                successMessage.className = 'chat-message flex gap-3';
                successMessage.innerHTML = `
                    <div class="w-8 h-8 bg-black rounded-xl flex-shrink-0 chat-avatar-tod">TOD</div>
                    <div class="glass rounded-2xl p-4 max-w-md">
                        <p class="text-sm">Thank you for your inquiry! We'll get back to you soon at <a href="mailto:info@tripleon.design" class="font-bold underline hover:text-blue-600">info@tripleon.design</a></p>
                    </div>
                `;
                chatWindow.appendChild(successMessage);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }, 1000);
        }
        
        // Lock scroll until Show More is clicked (desktop only)
        let scrollUnlocked = false;
        const isMobile = window.innerWidth <= 768;
        
        if (!isMobile) {
            document.body.style.overflow = 'hidden';
        } else {
            scrollUnlocked = true; // Unlock scroll on mobile by default
        }

        // Show More button unlocks scroll and scrolls to about
        document.querySelector('.show-more-btn').addEventListener('click', function(e) {
            e.preventDefault();
            scrollUnlocked = true;
            document.body.style.overflow = '';
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });

        // Smooth scroll for navigation (only when unlocked)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            if (anchor.classList.contains('show-more-btn')) return; // already handled
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                if (!scrollUnlocked) {
                    scrollUnlocked = true;
                    document.body.style.overflow = '';
                }
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // ==========================================
        // Modal functionality for About section
        // ==========================================
        const modalData = {
            graphic: {
                title: 'GRAPHIC ON. 온전',
                body: 'TOD perfectly visualizes client information for its intended purpose, using 3D interactive graphics as key focal points.\n\nTOD는 클라이언트의 정보를 목적에 맞게 3D interactive 그래픽을 포인트로 사용하여 온전하게 시각화합니다.'
            },
            switch: {
                title: 'SWITCH ON. 온유',
                body: 'TOD brings the core message into clear light, like turning on a switch. We have strong energy, but we control it and show it with care. We aim for a gentle design—simple, refined, and striking.\n\nTOD는 스위치가 켜지듯 명확한 빛으로 본질을 밝힙니다. 에너지는 가득하지만 적절한 지점의 균형으로 온유한 디자인을 지향합니다.'
            },
            world: {
                title: 'WORLD ON. 온누리',
                body: 'TOD aims to connect our clients achievements to the world.\n\nTOD는 클라이언트의 성과를 온누리로 연결하는 미션을 수행합니다.'
            }
        };

        function openModal(type, clickX, clickY) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = modalData[type].title;
            body.textContent = modalData[type].body;

            // Position modal origin at click point for pop effect
            const rect = content.getBoundingClientRect();
            content.style.transformOrigin = `${clickX}px ${clickY}px`;

            modal.classList.add('show');
            setTimeout(() => modal.classList.add('visible'), 10);
            setTimeout(() => content.classList.add('pop'), 10);
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            content.classList.remove('pop');
            modal.classList.remove('visible');
            setTimeout(() => modal.classList.remove('show'), 400);
        }

        // Attach click events to about lines
        document.querySelectorAll('.about-line.clickable').forEach(line => {
            line.addEventListener('click', function(e) {
                const type = this.getAttribute('data-modal');
                openModal(type, e.clientX, e.clientY);
            });
        });

        // Close modal on overlay click
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
                closeEmailModal();
            }
        });

        // ==========================================
        // Email Modal functionality
        // ==========================================
        function openEmailModal(e) {
            e.preventDefault();
            const modal = document.getElementById('emailModal');
            const content = document.getElementById('emailModalContent');
            
            modal.classList.add('show');
            setTimeout(() => modal.classList.add('visible'), 10);
            setTimeout(() => content.classList.add('pop'), 10);
        }

        function closeEmailModal() {
            const modal = document.getElementById('emailModal');
            const content = document.getElementById('emailModalContent');
            
            content.classList.remove('pop');
            modal.classList.remove('visible');
            setTimeout(() => {
                modal.classList.remove('show');
                // Reset form
                document.getElementById('emailForm').reset();
            }, 400);
        }

        // Send email function
        function sendEmail(e) {
            e.preventDefault();
            
            const form = e.target;
            const submitBtn = document.getElementById('emailSubmitBtn');
            const formData = {
                name: form.name.value,
                email: form.email.value,
                subject: form.subject.value,
                message: form.message.value
            };
            
            // Disable button during submission
            submitBtn.disabled = true;
            submitBtn.textContent = 'SENDING...';
            
            // Simulate email sending (in production, replace with actual API call)
            setTimeout(() => {
                // Create mailto link as fallback
                const mailtoLink = `mailto:info@tripleon.design?subject=${encodeURIComponent(formData.subject)}&body=${encodeURIComponent(
                    `Name: ${formData.name}\nEmail: ${formData.email}\n\nMessage:\n${formData.message}`
                )}`;
                
                // Open mailto link
                window.location.href = mailtoLink;
                
                // Reset button
                submitBtn.disabled = false;
                submitBtn.textContent = 'SEND MESSAGE';
                
                // Show success message
                alert('Email client opened! Your message has been prepared.');
                
                // Close modal
                closeEmailModal();
            }, 1000);
        }

        // Close email modal on overlay click
        document.getElementById('emailModal').addEventListener('click', function(e) {
            if (e.target === this) closeEmailModal();
        });

        // ==========================================
        // Triangle Orbit Animation + Bounce Physics
        // ==========================================
        (function() {
            const els = [
                document.querySelector('.interact01'),
                document.querySelector('.interact02'),
                document.querySelector('.interact03')
            ];
            const hero = document.getElementById('hero');
            if (!els[0] || !els[1] || !els[2] || !hero) return;

            // Detect mobile
            const isMobile = window.innerWidth <= 768;

            // Positions: desktop vs mobile (mobile uses smaller offsets)
            const P = isMobile ? [
                { tp: 50, lp: 55, lo: 30 },     // A
                { tp: 88, lp: 35, lo: -30 },    // B
                { tp: 62, lp: 70, lo: 0 }       // C
            ] : [
                { tp: 50, lp: 50, lo: 100 },
                { tp: 90, lp: 30, lo: -100 },
                { tp: 62, lp: 72, lo: 0 }
            ];

            // interact02 custom orbit points
            const P_behind = isMobile
                ? { tp: 46, lp: 50, lo: 10 }
                : { tp: 46, lp: 48, lo: 40 };
            const P_bottom = isMobile
                ? { tp: 92, lp: 30, lo: -20 }
                : { tp: 95, lp: 25, lo: -80 };

            // Clockwise orbit paths
            const paths = [
                [P[0], P[2], P[1]],
                [P_bottom, P_behind, P[2]],
                [P[2], P[1], P[0]]
            ];

            const DURATION = 24000; // 24 seconds per full cycle

            // Orbital position (recalculated each frame)
            const orb = Array.from({length:3}, () => ({x:0, y:0}));
            // Spring state for bounce (displacement + velocity)
            const spr = Array.from({length:3}, () => ({x:0, y:0, vx:0, vy:0}));

            let t0 = null;
            let mcx = -1e4, mcy = -1e4, pmcx = 0, pmcy = 0, mInit = false;

            const lp  = (a, b, t) => a + (b - a) * t;
            const ez  = t => t < 0.5 ? 4*t*t*t : 1 - Math.pow(-2*t + 2, 3) / 2;
            const toXY = (p, w, h) => ({ x: w * p.lp / 100 + p.lo, y: h * p.tp / 100 });

            function frame(ts) {
                if (!t0) t0 = ts;
                const prog = ((ts - t0) % DURATION) / DURATION;
                const W = hero.offsetWidth, H = hero.offsetHeight;
                const hr = hero.getBoundingClientRect();

                // --- Orbit interpolation (staggered timing) ---
                // Phase offsets so elements don't collide mid-path
                const phase = [0, 0.07, 0.14];
                const segs = [], tVal = [];

                const TAU = 2 * Math.PI;
                const THIRD = TAU / 3;

                // All 3 elements use cosine-blend orbit
                for (let i = 0; i < 3; i++) {
                    let iProg = (prog + phase[i]) % 1.0;

                    // interact01: add tension (linger at vertices, snap between)
                    if (i === 0) {
                        iProg = iProg - 0.15 * Math.sin(iProg * TAU * 3);
                        if (iProg < 0) iProg += 1;
                        if (iProg >= 1) iProg -= 1;
                    }

                    // seg/tVal still needed for scale calculations
                    const iP3 = iProg * 3;
                    segs[i] = Math.floor(iP3) % 3;
                    tVal[i] = ez(iP3 - segs[i]);

                    const path = paths[i];
                    const angle = iProg * TAU;
                    const v0 = toXY(path[0], W, H);
                    const v1 = toXY(path[1], W, H);
                    const v2 = toXY(path[2], W, H);

                    const w0 = (1 + 2 * Math.cos(angle)) / 3;
                    const w1 = (1 + 2 * Math.cos(angle - THIRD)) / 3;
                    const w2 = (1 + 2 * Math.cos(angle + THIRD)) / 3;

                    orb[i].x = w0 * v0.x + w1 * v1.x + w2 * v2.x;
                    orb[i].y = w0 * v0.y + w1 * v1.y + w2 * v2.y;

                    // Clamp all elements to hero bounds (stay on screen)
                    const pad = isMobile ? 20 : 50;
                    orb[i].x = Math.max(pad, Math.min(W - pad, orb[i].x));
                    orb[i].y = Math.max(pad, Math.min(H - pad, orb[i].y));
                }

                // --- Mouse interaction ---
                const rmx = mcx - hr.left;
                const rmy = mcy - hr.top;
                let dvx = 0, dvy = 0;
                if (mInit) { dvx = mcx - pmcx; dvy = mcy - pmcy; }
                pmcx = mcx; pmcy = mcy; mInit = true;

                // Mouse pushes nearby elements
                for (let i = 0; i < 3; i++) {
                    const dx = rmx - (orb[i].x + spr[i].x);
                    const dy = rmy - (orb[i].y + spr[i].y);
                    const d  = Math.hypot(dx, dy);
                    if (d < 300 && d > 1) {
                        const str = (300 - d) / 300;
                        // Push along mouse movement direction
                        spr[i].vx += dvx * str * 0.25;
                        spr[i].vy += dvy * str * 0.25;
                        // Repel away from mouse
                        spr[i].vx -= (dx / d) * str * 1.5;
                        spr[i].vy -= (dy / d) * str * 1.5;
                    }
                }

                // Element-to-element repulsion (bounce when close)
                for (let i = 0; i < 3; i++) {
                    for (let j = i + 1; j < 3; j++) {
                        const dx = (orb[j].x + spr[j].x) - (orb[i].x + spr[i].x);
                        const dy = (orb[j].y + spr[j].y) - (orb[i].y + spr[i].y);
                        const d  = Math.hypot(dx, dy);
                        if (d < 400 && d > 1) {
                            const f  = (400 - d) / 400 * 3.5;
                            const nx = dx / d, ny = dy / d;
                            spr[i].vx -= nx * f;  spr[i].vy -= ny * f;
                            spr[j].vx += nx * f;  spr[j].vy += ny * f;
                        }
                    }
                }

                // Spring-back physics (stiffness + damping → elastic bounce)
                for (let i = 0; i < 3; i++) {
                    spr[i].vx = (spr[i].vx - spr[i].x * 0.05) * 0.88;
                    spr[i].vy = (spr[i].vy - spr[i].y * 0.05) * 0.88;
                    spr[i].x += spr[i].vx;
                    spr[i].y += spr[i].vy;
                }

                // --- interact01 scale: 140% → 90% → 170% per vertex ---
                // path[0]=A → 140%, path[1]=C → 90%, path[2]=B → 170%
                const s01 = [1.4, 0.9, 1.7];
                let scale01 = lp(s01[segs[0]], s01[(segs[0]+1)%3], tVal[0]);

                // --- interact02 scale (50% when away, 100% at home) ---
                let scale02 = 1;
                if (segs[1] === 0) scale02 = lp(1.0, 0.5, tVal[1]);
                else if (segs[1] === 1) scale02 = 0.5;
                else scale02 = lp(0.5, 1.0, tVal[1]);

                // --- interact03 scale (65% when away, 100% at home) ---
                let scale03 = 1;
                if (segs[2] === 0) scale03 = lp(1.0, 0.65, tVal[2]);
                else if (segs[2] === 1) scale03 = 0.65;
                else scale03 = lp(0.65, 1.0, tVal[2]);

                // --- Dynamic z-index: continuous y→z mapping ---
                // Title is z-20. y at 50% of hero → z=20 (crossover point)
                // Above title → z < 20 (behind), below title → z > 20 (in front)
                const zLevels = [0, 0, 0];
                for (let i = 0; i < 3; i++) {
                    zLevels[i] = Math.round((orb[i].y / H) * 40);
                }

                // --- Render ---
                for (let i = 0; i < 3; i++) {
                    els[i].style.left = orb[i].x + 'px';
                    els[i].style.top  = orb[i].y + 'px';
                    els[i].style.zIndex = zLevels[i];
                    let scl = '';
                    if (i === 0) scl = ` scale(${scale01})`;
                    else if (i === 1) scl = ` scale(${scale02})`;
                    else if (i === 2) scl = ` scale(${scale03})`;
                    els[i].style.transform =
                        `translate(calc(-50% + ${spr[i].x}px), calc(-50% + ${spr[i].y}px))${scl}`;
                }

                requestAnimationFrame(frame);
            }

            // Mouse events (desktop)
            document.addEventListener('mousemove', e => {
                mcx = e.clientX;
                mcy = e.clientY;
            });

            // Touch events (mobile)
            document.addEventListener('touchmove', e => {
                const touch = e.touches[0];
                mcx = touch.clientX;
                mcy = touch.clientY;
            }, { passive: true });
            document.addEventListener('touchstart', e => {
                const touch = e.touches[0];
                mcx = touch.clientX;
                mcy = touch.clientY;
                pmcx = mcx; pmcy = mcy;
            }, { passive: true });
            document.addEventListener('touchend', () => {
                mcx = -1e4; mcy = -1e4;
            });

            requestAnimationFrame(frame);
        })();
        
    </script>
</body>
</html>
